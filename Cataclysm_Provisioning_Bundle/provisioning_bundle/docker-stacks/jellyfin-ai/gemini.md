# Jellyfin AI Media Stack: Integration with PMOVES & Cataclysm Deployment

This document outlines the integration of the Jellyfin AI Media Stack within the broader PMOVES autonomous agent ecosystem and details its deployment process using the Cataclysm Provisioning Bundle.

## 1. System Overview

-   **Jellyfin AI Media Stack**: A specialized, Docker-based AI service designed for advanced audio/video analysis, entity extraction, and content creation workflows. It acts as a core "specialized AI muscle" within the PMOVES system.
-   **PMOVES (Powerful Moves)**: A sophisticated, autonomous multi-agent system orchestrated by **Agent Zero**. It leverages specialized components like **Archon** for knowledge management, **HiRAG** for complex reasoning, and **n8n** for workflow automation to perform research, data processing, and content generation.
-   **Cataclysm Provisioning Bundle**: An infrastructure-as-code toolkit designed for the mass deployment of Docker Compose stacks onto various hardware targets, including workstations and edge devices like the Jetson Orin Nano.

## 2. Integration Architecture with PMOVES

The Jellyfin AI Media Stack is not a standalone service but a deeply integrated component that enhances the capabilities of the PMOVES ecosystem.

### Unified Data & Knowledge Backbone

-   **Shared Supabase Backend**: Both the Jellyfin stack and PMOVES utilize **Supabase** as their primary database. This unified backend allows media metadata, AI analysis results (e.g., transcriptions, object detections), and extracted entities from Jellyfin to be seamlessly stored and made available to the central PMOVES knowledge base.
-   **Enriching Archon & HiRAG**: The structured data generated by Jellyfin's AI models is ingested by **Archon**, PMOVES's knowledge management system. This enriches the system's knowledge base with deep media insights. This multi-layered knowledge can then be processed by **HiRAG** (Hierarchical Retrieval-Augmented Generation) to enable deeper, fact-based reasoning on complex topics.
-   **Shared Entity Extraction**: The Jellyfin stack uses **Google LangExtract** (powered by Gemini) for entity extraction from media. LangExtract is also a core component in PMOVES, ensuring a consistent approach to building knowledge graphs (in Neo4j) and improving information traceability across the entire system.

### Orchestration and Automation

-   **Task Delegation via Agent Zero & n8n**: As the primary orchestrator, **Agent Zero** can delegate media-related tasks to the Jellyfin stack. For example, Agent Zero can identify a relevant YouTube video during its research and use **n8n** (the automation hub) to trigger the Jellyfin stack's "YouTube Downloader" and subsequent analysis pipeline.
-   **API-Driven Workflows**: The Jellyfin stack's API Gateway and Orchestrator microservice allow **n8n** to manage and coordinate complex workflows, creating a seamless communication channel between the core PMOVES agents and the media analysis services.

### Content Creation Synergy

-   **From Analysis to Creation**: The Jellyfin stack can analyze media to extract key moments, generate talking points, and identify topics for tags.
-   **Powering ComfyUI**: These analytical outputs serve as high-value inputs for **ComfyUI**, which PMOVES uses for sophisticated content creation. This allows PMOVES to autonomously generate new media, reports, or visualizations based on the rich insights from the Jellyfin stack, with the entire process automated by **n8n**.

### Distributed Execution

-   **Shared Hardware Resources**: Both systems are designed as distributed, Docker-based applications. The Jellyfin AI services (Audio, Video, Entity Extraction) can run on the same hardware network (workstations, Jetson edge devices) that PMOVES uses for its local models (e.g., Ollama, NVIDIA NIM), ensuring maximum efficiency.

## 3. Deployment with the Cataclysm Provisioning Bundle

The Cataclysm bundle is the ideal tool for deploying the Jellyfin AI Media Stack across the PMOVES distributed hardware network.

-   **Docker Compose Integration**: The Jellyfin stack is already structured as a `docker-compose.yml` application, which integrates directly into the Cataclysm bundle's "Ready-to-run Docker Compose stacks" deployment model.
-   **Automated Deployment Scripts**:
    -   **Servers/VMs**: The `linux/ubuntu-autoinstall/user-data` script in the Cataclysm bundle can be extended to clone the `Pmoves-Jelly` repository and execute `docker compose up -d` to automatically deploy the stack on any provisioned Linux host.
    -   **Edge Devices (Jetson)**: The `jetson/jetson-postinstall.sh` script can be modified to deploy the GPU-accelerated AI services (Audio AI, Video AI) to Jetson Orin Nano devices, leveraging their specialized hardware for efficient model inference.
-   **Configuration and Secrets Management**:
    -   The Jellyfin stack's configuration (database credentials, API keys) is managed via an `.env` file.
    -   The Cataclysm bundle can use a template `.env` file with placeholders, and its post-install scripts can populate the actual secrets from a secure source during provisioning. The required Supabase setup script can also be executed as part of this automated process.

By combining the AI capabilities of the Jellyfin stack with the autonomous orchestration of PMOVES and the efficient deployment of Cataclysm, you create a highly sophisticated, self-managing media intelligence and content creation system.